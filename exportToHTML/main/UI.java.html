<html>
<head>
<title>UI.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #2aacb8;}
.s4 { color: #7a7e85;}
.s5 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
UI.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">main</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">Entity</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">object</span><span class="s2">.</span><span class="s1">OBJ_Coin_Bronze</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">object</span><span class="s2">.</span><span class="s1">OBJ_Heart</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">object</span><span class="s2">.</span><span class="s1">OBJ_Mana_Crystal</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">awt</span><span class="s2">.*;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">awt</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">BufferedImage</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">IOException</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">InputStream</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">ArrayList</span><span class="s2">;</span>

<span class="s0">public class </span><span class="s1">UI </span><span class="s2">{</span>
    <span class="s1">GamePanel gp</span><span class="s2">;</span>
    <span class="s1">Graphics2D g2</span><span class="s2">;</span>
    <span class="s1">Font maruMonica</span><span class="s2">, </span><span class="s1">purisaB</span><span class="s2">;</span>
    <span class="s1">BufferedImage heart_full</span><span class="s2">, </span><span class="s1">heart_half</span><span class="s2">, </span><span class="s1">heart_blank</span><span class="s2">, </span><span class="s1">crystal_full</span><span class="s2">, </span><span class="s1">crystal_blank</span><span class="s2">, </span><span class="s1">coin</span><span class="s2">;</span>
    <span class="s0">public boolean </span><span class="s1">messageOn </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span>
    <span class="s1">ArrayList</span><span class="s2">&lt;</span><span class="s1">String</span><span class="s2">&gt; </span><span class="s1">message </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
    <span class="s1">ArrayList</span><span class="s2">&lt;</span><span class="s1">Integer</span><span class="s2">&gt; </span><span class="s1">messageCounter </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
    <span class="s0">public boolean </span><span class="s1">gameFinished </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span>
    <span class="s0">public </span><span class="s1">String currentDialogue</span><span class="s2">;</span>
    <span class="s0">public int </span><span class="s1">commandNum </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">public int </span><span class="s1">titleScreenState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">; </span><span class="s4">// 0: the first screen</span>
    <span class="s0">public int </span><span class="s1">playerSlotCol </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">public int </span><span class="s1">playerSlotRow </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">public int </span><span class="s1">npcSlotCol </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">public int </span><span class="s1">npcSlotRow </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">public int </span><span class="s1">prevSlotCol </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">public int </span><span class="s1">prevSlotRow </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">int </span><span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s0">int </span><span class="s1">counter</span><span class="s2">;</span>
    <span class="s0">public </span><span class="s1">Entity npc</span><span class="s2">;</span>
    <span class="s0">int </span><span class="s1">charIndex </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s1">String combinedText </span><span class="s2">= </span><span class="s5">&quot;&quot;</span><span class="s2">;</span>



     <span class="s0">public </span><span class="s1">UI</span><span class="s2">(</span><span class="s1">GamePanel gp</span><span class="s2">) {</span>
         <span class="s0">this</span><span class="s2">.</span><span class="s1">gp </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">;</span>

         <span class="s0">try </span><span class="s2">{</span>
             <span class="s1">InputStream is </span><span class="s2">= </span><span class="s1">getClass</span><span class="s2">().</span><span class="s1">getResourceAsStream</span><span class="s2">(</span><span class="s5">&quot;/font/x12y16pxMaruMonica.ttf&quot;</span><span class="s2">);</span>
             <span class="s1">maruMonica </span><span class="s2">= </span><span class="s1">Font</span><span class="s2">.</span><span class="s1">createFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">TRUETYPE_FONT</span><span class="s2">, </span><span class="s1">is</span><span class="s2">);</span>
             <span class="s1">is </span><span class="s2">= </span><span class="s1">getClass</span><span class="s2">().</span><span class="s1">getResourceAsStream</span><span class="s2">(</span><span class="s5">&quot;/font/Purisa Bold.ttf&quot;</span><span class="s2">);</span>
             <span class="s1">purisaB </span><span class="s2">= </span><span class="s1">Font</span><span class="s2">.</span><span class="s1">createFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">TRUETYPE_FONT</span><span class="s2">, </span><span class="s1">is</span><span class="s2">);</span>
         <span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">FontFormatException </span><span class="s2">| </span><span class="s1">IOException e</span><span class="s2">) {</span>
             <span class="s1">e</span><span class="s2">.</span><span class="s1">printStackTrace</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s4">// CREATE HUD OBJECT</span>
         <span class="s1">Entity heart </span><span class="s2">= </span><span class="s0">new </span><span class="s1">OBJ_Heart</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">);</span>
         <span class="s1">heart_full </span><span class="s2">= </span><span class="s1">heart</span><span class="s2">.</span><span class="s1">image</span><span class="s2">;</span>
         <span class="s1">heart_half </span><span class="s2">= </span><span class="s1">heart</span><span class="s2">.</span><span class="s1">image2</span><span class="s2">;</span>
         <span class="s1">heart_blank </span><span class="s2">= </span><span class="s1">heart</span><span class="s2">.</span><span class="s1">image3</span><span class="s2">;</span>
         <span class="s1">Entity crystal </span><span class="s2">= </span><span class="s0">new </span><span class="s1">OBJ_Mana_Crystal</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">);</span>
         <span class="s1">crystal_full </span><span class="s2">= </span><span class="s1">crystal</span><span class="s2">.</span><span class="s1">image</span><span class="s2">;</span>
         <span class="s1">crystal_blank </span><span class="s2">= </span><span class="s1">crystal</span><span class="s2">.</span><span class="s1">image2</span><span class="s2">;</span>
         <span class="s1">Entity bronzeCoin </span><span class="s2">= </span><span class="s0">new </span><span class="s1">OBJ_Coin_Bronze</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">);</span>
         <span class="s1">coin </span><span class="s2">= </span><span class="s1">bronzeCoin</span><span class="s2">.</span><span class="s1">down1</span><span class="s2">;</span>

     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">addMessage</span><span class="s2">(</span><span class="s1">String text</span><span class="s2">) {</span>
         <span class="s1">message</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">messageCounter</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s3">0</span><span class="s2">);</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">draw</span><span class="s2">(</span><span class="s1">Graphics2D g2</span><span class="s2">) {</span>
         <span class="s0">this</span><span class="s2">.</span><span class="s1">g2 </span><span class="s2">= </span><span class="s1">g2</span><span class="s2">;</span>

         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">maruMonica</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>

         <span class="s4">// PLAY STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">playState</span><span class="s2">) {</span>
             <span class="s1">drawPlayerLife</span><span class="s2">();</span>
             <span class="s1">drawMonsterLife</span><span class="s2">();</span>
             <span class="s1">drawMessage</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s4">// PAUSE STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">pauseState</span><span class="s2">) {</span>
             <span class="s1">drawPlayerLife</span><span class="s2">();</span>
             <span class="s1">drawPauseScreen</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s4">// DIALOGUE STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">dialogueState</span><span class="s2">) {</span>
             <span class="s1">drawDialogueScreen</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">titleState</span><span class="s2">) {</span>
             <span class="s1">drawTitleScreen</span><span class="s2">();</span>
             <span class="s0">if </span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">click </span><span class="s2">&amp;&amp; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">.</span><span class="s1">titleScreenState </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRect</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">newGame</span><span class="s2">.</span><span class="s1">x</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">newGame</span><span class="s2">.</span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">newGame</span><span class="s2">.</span><span class="s1">width</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">newGame</span><span class="s2">.</span><span class="s1">height</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRect</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">loadGame</span><span class="s2">.</span><span class="s1">x</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">loadGame</span><span class="s2">.</span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">loadGame</span><span class="s2">.</span><span class="s1">width</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">loadGame</span><span class="s2">.</span><span class="s1">height</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRect</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">quitGame</span><span class="s2">.</span><span class="s1">x</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">quitGame</span><span class="s2">.</span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">quitGame</span><span class="s2">.</span><span class="s1">width</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">quitGame</span><span class="s2">.</span><span class="s1">height</span><span class="s2">);</span>
             <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">click </span><span class="s2">&amp;&amp; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">.</span><span class="s1">titleScreenState </span><span class="s2">== </span><span class="s3">1</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRect</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">thief</span><span class="s2">.</span><span class="s1">x</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">thief</span><span class="s2">.</span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">thief</span><span class="s2">.</span><span class="s1">width</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">thief</span><span class="s2">.</span><span class="s1">height</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRect</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">fighter</span><span class="s2">.</span><span class="s1">x</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">fighter</span><span class="s2">.</span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">fighter</span><span class="s2">.</span><span class="s1">width</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">fighter</span><span class="s2">.</span><span class="s1">height</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRect</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">sorcerer</span><span class="s2">.</span><span class="s1">x</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">sorcerer</span><span class="s2">.</span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">sorcerer</span><span class="s2">.</span><span class="s1">width</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">sorcerer</span><span class="s2">.</span><span class="s1">height</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRect</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">back</span><span class="s2">.</span><span class="s1">x</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">back</span><span class="s2">.</span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">back</span><span class="s2">.</span><span class="s1">width</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">back</span><span class="s2">.</span><span class="s1">height</span><span class="s2">);</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s4">// CHARACTER STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">characterState</span><span class="s2">) {</span>
             <span class="s1">drawCharacterScreen</span><span class="s2">();</span>
             <span class="s1">drawInventory</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">, </span><span class="s0">true</span><span class="s2">);</span>
         <span class="s2">}</span>

         <span class="s4">// OPTIONS STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">optionState</span><span class="s2">) {</span>
             <span class="s1">drawOptionScreen</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s4">// GAME OVER STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameOverState</span><span class="s2">) {</span>
             <span class="s1">drawGameOverScreen</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s4">// TRANSITION STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">transitionState</span><span class="s2">) {</span>
             <span class="s1">drawTransition</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s4">// TRADE STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tradeState</span><span class="s2">) {</span>
             <span class="s1">drawTradeScreen</span><span class="s2">();</span>
         <span class="s2">}</span>

         <span class="s4">// SLEEP STATE</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">sleepState</span><span class="s2">) {</span>
             <span class="s1">drawSleepScreen</span><span class="s2">();</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawGameOverScreen</span><span class="s2">() {</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">150</span><span class="s2">));</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenWidth</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenHeight</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>

         <span class="s0">int </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">;</span>
         <span class="s1">String text</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s3">110f</span><span class="s2">));</span>

         <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;Game Over&quot;</span><span class="s2">;</span>
         <span class="s4">// SHADOW</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">black</span><span class="s2">);</span>
         <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">4</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>

         <span class="s4">// MAIN</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s3">4</span><span class="s2">, </span><span class="s1">y </span><span class="s2">-</span><span class="s3">4</span><span class="s2">);</span>

         <span class="s4">// Retry</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s3">50F</span><span class="s2">));</span>
         <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;Retry&quot;</span><span class="s2">;</span>
         <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">4</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s3">40</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
         <span class="s2">}</span>

         <span class="s4">// Back to Title Screen</span>
         <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;Quit&quot;</span><span class="s2">;</span>
         <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">y </span><span class="s2">+= </span><span class="s3">55</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">1</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s3">40</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawPlayerLife</span><span class="s2">() {</span>
         <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">iconSize </span><span class="s2">= </span><span class="s3">32</span><span class="s2">;</span>

         <span class="s4">// DRAW BLANK HEART</span>
         <span class="s0">while</span><span class="s2">(</span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">maxLife </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">heart_blank</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">iconSize</span><span class="s2">, </span><span class="s1">iconSize</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
             <span class="s1">i</span><span class="s2">++;</span>
             <span class="s1">x </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s2">}</span>

         <span class="s4">// RESET</span>
         <span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">i </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>

         <span class="s4">// DRAW CURRENT LIFE</span>
         <span class="s0">while</span><span class="s2">(</span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">life</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">heart_half</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
             <span class="s1">i</span><span class="s2">++;</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">life</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">heart_full</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
             <span class="s2">}</span>
             <span class="s1">i</span><span class="s2">++;</span>
             <span class="s1">x </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s2">}</span>

         <span class="s4">// DRAW MAX MANA</span>
         <span class="s1">x </span><span class="s2">= (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">) - </span><span class="s3">5</span><span class="s2">;</span>
         <span class="s1">y </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">1.5</span><span class="s2">);</span>
         <span class="s1">i </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
         <span class="s0">while</span><span class="s2">(</span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">maxMana</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">crystal_blank</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
             <span class="s1">i</span><span class="s2">++;</span>
             <span class="s1">x </span><span class="s2">+= </span><span class="s3">35</span><span class="s2">;</span>
         <span class="s2">}</span>

         <span class="s4">// DRAW MANA</span>
         <span class="s1">x </span><span class="s2">= (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">) - </span><span class="s3">5</span><span class="s2">;</span>
         <span class="s1">y </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">1.5</span><span class="s2">);         </span><span class="s1">i </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
         <span class="s0">while </span><span class="s2">(</span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">mana</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">crystal_full</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
             <span class="s1">i</span><span class="s2">++;</span>
             <span class="s1">x </span><span class="s2">+= </span><span class="s3">35</span><span class="s2">;</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawMonsterLife</span><span class="s2">() {</span>
        <span class="s0">for</span><span class="s2">(</span><span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s3">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">monster</span><span class="s2">[</span><span class="s3">1</span><span class="s2">].</span><span class="s1">length</span><span class="s2">; </span><span class="s1">i</span><span class="s2">++) {</span>
            <span class="s1">Entity monster </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">monster</span><span class="s2">[</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">currentMap</span><span class="s2">][</span><span class="s1">i</span><span class="s2">];</span>
            <span class="s0">if</span><span class="s2">(</span><span class="s1">monster </span><span class="s2">!= </span><span class="s0">null </span><span class="s2">&amp;&amp; </span><span class="s1">monster</span><span class="s2">.</span><span class="s1">inCamera</span><span class="s2">()) {</span>

                <span class="s4">// MONSTER HP BAR</span>
                <span class="s0">if</span><span class="s2">(</span><span class="s1">monster</span><span class="s2">.</span><span class="s1">hpBarOn </span><span class="s2">&amp;&amp; !</span><span class="s1">monster</span><span class="s2">.</span><span class="s1">boss</span><span class="s2">) {</span>
                    <span class="s0">double </span><span class="s1">oneScale </span><span class="s2">= (</span><span class="s0">double</span><span class="s2">) </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s1">monster</span><span class="s2">.</span><span class="s1">maxLife</span><span class="s2">;</span>
                    <span class="s0">double </span><span class="s1">hpBarValue </span><span class="s2">= </span><span class="s1">oneScale </span><span class="s2">* </span><span class="s1">monster</span><span class="s2">.</span><span class="s1">life</span><span class="s2">;</span>

                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">35</span><span class="s2">, </span><span class="s3">35</span><span class="s2">, </span><span class="s3">35</span><span class="s2">));</span>
                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRect</span><span class="s2">(</span><span class="s1">monster</span><span class="s2">.</span><span class="s1">getScreenX</span><span class="s2">() - </span><span class="s3">1</span><span class="s2">, </span><span class="s1">monster</span><span class="s2">.</span><span class="s1">getScreenY</span><span class="s2">() - </span><span class="s3">16</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">+ </span><span class="s3">2</span><span class="s2">, </span><span class="s3">12</span><span class="s2">);</span>

                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">255</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">30</span><span class="s2">));</span>
                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRect</span><span class="s2">(</span><span class="s1">monster</span><span class="s2">.</span><span class="s1">getScreenX</span><span class="s2">(), </span><span class="s1">monster</span><span class="s2">.</span><span class="s1">getScreenY</span><span class="s2">() - </span><span class="s3">15</span><span class="s2">, (</span><span class="s0">int</span><span class="s2">) </span><span class="s1">hpBarValue</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>

                    <span class="s1">monster</span><span class="s2">.</span><span class="s1">hpBarCounter</span><span class="s2">++;</span>

                    <span class="s0">if </span><span class="s2">(</span><span class="s1">monster</span><span class="s2">.</span><span class="s1">hpBarCounter </span><span class="s2">&gt; </span><span class="s3">600</span><span class="s2">) {</span>
                        <span class="s1">monster</span><span class="s2">.</span><span class="s1">hpBarCounter </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                        <span class="s1">monster</span><span class="s2">.</span><span class="s1">hpBarOn </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span>
                    <span class="s2">}</span>
                <span class="s2">} </span><span class="s0">else if</span><span class="s2">(</span><span class="s1">monster</span><span class="s2">.</span><span class="s1">boss</span><span class="s2">) {</span>
                    <span class="s0">double </span><span class="s1">oneScale </span><span class="s2">= (</span><span class="s0">double</span><span class="s2">) </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize  </span><span class="s2">* </span><span class="s3">8 </span><span class="s2">/ </span><span class="s1">monster</span><span class="s2">.</span><span class="s1">maxLife</span><span class="s2">;</span>
                    <span class="s0">double </span><span class="s1">hpBarValue </span><span class="s2">= </span><span class="s1">oneScale </span><span class="s2">* </span><span class="s1">monster</span><span class="s2">.</span><span class="s1">life</span><span class="s2">;</span>

                    <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenWidth </span><span class="s2">/ </span><span class="s3">2 </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">4</span><span class="s2">;</span>
                    <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">10</span><span class="s2">;</span>

                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">35</span><span class="s2">, </span><span class="s3">35</span><span class="s2">, </span><span class="s3">35</span><span class="s2">));</span>
                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRect</span><span class="s2">(</span><span class="s1">x </span><span class="s2">- </span><span class="s3">1</span><span class="s2">, </span><span class="s1">y </span><span class="s2">- </span><span class="s3">1</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">8 </span><span class="s2">+ </span><span class="s3">2</span><span class="s2">, </span><span class="s3">22</span><span class="s2">);</span>

                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">255</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">30</span><span class="s2">));</span>
                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRect</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, (</span><span class="s0">int</span><span class="s2">) </span><span class="s1">hpBarValue</span><span class="s2">, </span><span class="s3">20</span><span class="s2">);</span>

                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s3">24f</span><span class="s2">));</span>
                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
                    <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">monster</span><span class="s2">.</span><span class="s1">name</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">4</span><span class="s2">, </span><span class="s1">y </span><span class="s2">- </span><span class="s3">10</span><span class="s2">);</span>
                <span class="s2">}</span>
            <span class="s2">}</span>
        <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawMessage</span><span class="s2">() {</span>
         <span class="s0">int </span><span class="s1">messageX </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">messageY </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">4</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s3">32F</span><span class="s2">));</span>

         <span class="s0">for</span><span class="s2">(</span><span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s3">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">message</span><span class="s2">.</span><span class="s1">size</span><span class="s2">(); </span><span class="s1">i</span><span class="s2">++) {</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">message</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) != </span><span class="s0">null</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">black</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">message</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">), </span><span class="s1">messageX </span><span class="s2">+ </span><span class="s3">2</span><span class="s2">, </span><span class="s1">messageY </span><span class="s2">+ </span><span class="s3">2</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">message</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">), </span><span class="s1">messageX</span><span class="s2">, </span><span class="s1">messageY</span><span class="s2">);</span>

                 <span class="s0">int </span><span class="s1">counter </span><span class="s2">= </span><span class="s1">messageCounter</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) + </span><span class="s3">1</span><span class="s2">;</span>
                 <span class="s1">messageCounter</span><span class="s2">.</span><span class="s1">set</span><span class="s2">(</span><span class="s1">i</span><span class="s2">, </span><span class="s1">counter</span><span class="s2">);</span>
                 <span class="s1">messageY </span><span class="s2">+= </span><span class="s3">50</span><span class="s2">;</span>

                 <span class="s0">if</span><span class="s2">(</span><span class="s1">messageCounter</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) &gt; </span><span class="s3">180</span><span class="s2">) {</span>
                     <span class="s1">message</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s1">i</span><span class="s2">);</span>
                     <span class="s1">messageCounter</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s1">i</span><span class="s2">);</span>
                 <span class="s2">}</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawPauseScreen</span><span class="s2">() {</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">PLAIN</span><span class="s2">, </span><span class="s3">80</span><span class="s2">));</span>
         <span class="s1">String text </span><span class="s2">= </span><span class="s5">&quot;PAUSE&quot;</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenHeight </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>

         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawCharacterScreen</span><span class="s2">() {</span>
         <span class="s4">// CREATE FRAME</span>
         <span class="s0">final int </span><span class="s1">frameX </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s0">final int </span><span class="s1">frameY </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s0">final int </span><span class="s1">frameWidth </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">5</span><span class="s2">;</span>
         <span class="s0">final int </span><span class="s1">frameHeight </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">10</span><span class="s2">;</span>
         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">, </span><span class="s1">frameWidth</span><span class="s2">, </span><span class="s1">frameHeight</span><span class="s2">);</span>

         <span class="s4">// TEXT</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s3">32F</span><span class="s2">));</span>

         <span class="s0">int </span><span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s3">20</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s0">final int </span><span class="s1">lineHeight </span><span class="s2">= </span><span class="s3">35</span><span class="s2">;</span>

         <span class="s4">// NAMES</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Level&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Life&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Mana&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Strength&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Dexterity&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Attack&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Defense&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Exp&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Next Level&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Coin&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight </span><span class="s2">+ </span><span class="s3">10</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Weapon&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight </span><span class="s2">+ </span><span class="s3">15</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Shield&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>

         <span class="s4">// VALUES</span>
         <span class="s0">int </span><span class="s1">tailX </span><span class="s2">= (</span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">frameWidth</span><span class="s2">) - </span><span class="s3">30</span><span class="s2">;</span>
         <span class="s4">// Reset textY</span>
         <span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">String value</span><span class="s2">;</span>
         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">level</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">life </span><span class="s2">+ </span><span class="s5">&quot;/&quot; </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">maxLife</span><span class="s2">;</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">mana </span><span class="s2">+ </span><span class="s5">&quot;/&quot; </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">maxMana</span><span class="s2">;</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">strength</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">dexterity</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">attack</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">defense</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">exp</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">nextLevelExp</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">value </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">coin</span><span class="s2">);</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tailX</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">lineHeight</span><span class="s2">;</span>

         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">currentWeapon</span><span class="s2">.</span><span class="s1">down1</span><span class="s2">, </span><span class="s1">tailX </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">textY </span><span class="s2">- </span><span class="s3">24</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">currentShield</span><span class="s2">.</span><span class="s1">down1</span><span class="s2">, </span><span class="s1">tailX </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">textY </span><span class="s2">- </span><span class="s3">24</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawSleepScreen</span><span class="s2">() {</span>
         <span class="s1">counter</span><span class="s2">++;</span>

         <span class="s0">if</span><span class="s2">(</span><span class="s1">counter </span><span class="s2">&lt; </span><span class="s3">120</span><span class="s2">) {</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">filterAlpha </span><span class="s2">+= </span><span class="s3">0.01f</span><span class="s2">;</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">filterAlpha </span><span class="s2">&gt; </span><span class="s3">1f</span><span class="s2">) {</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">filterAlpha </span><span class="s2">= </span><span class="s3">1</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s0">if</span><span class="s2">(</span><span class="s1">counter </span><span class="s2">&gt;= </span><span class="s3">120</span><span class="s2">) {</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">filterAlpha </span><span class="s2">-= </span><span class="s3">0.01f</span><span class="s2">;</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">filterAlpha </span><span class="s2">&lt;= </span><span class="s3">0f</span><span class="s2">) {</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">filterAlpha </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">counter </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">dayState </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">day</span><span class="s2">;</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">eManager</span><span class="s2">.</span><span class="s1">lighting</span><span class="s2">.</span><span class="s1">dayCounter </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">playState</span><span class="s2">;</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">getImage</span><span class="s2">();</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

    <span class="s0">public void </span><span class="s1">saveSlotPosition</span><span class="s2">() {</span>
        <span class="s1">prevSlotCol </span><span class="s2">= </span><span class="s1">playerSlotCol</span><span class="s2">;</span>
        <span class="s1">prevSlotRow </span><span class="s2">= </span><span class="s1">playerSlotRow</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s0">public void </span><span class="s1">restoreSlotPosition</span><span class="s2">() {</span>
        <span class="s1">playerSlotCol </span><span class="s2">= </span><span class="s1">prevSlotCol</span><span class="s2">;</span>
        <span class="s1">playerSlotRow </span><span class="s2">= </span><span class="s1">prevSlotRow</span><span class="s2">;</span>
    <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawInventory</span><span class="s2">(</span><span class="s1">Entity entity</span><span class="s2">, </span><span class="s0">boolean </span><span class="s1">cursor</span><span class="s2">) {</span>
         <span class="s0">int </span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">, </span><span class="s1">frameWidth</span><span class="s2">, </span><span class="s1">frameHeight</span><span class="s2">, </span><span class="s1">slotCol</span><span class="s2">, </span><span class="s1">slotRow</span><span class="s2">;</span>

         <span class="s0">if</span><span class="s2">(</span><span class="s1">entity </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">) {</span>
             <span class="s1">frameX </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">12</span><span class="s2">;</span>
             <span class="s1">frameY </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">frameWidth </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
             <span class="s1">frameHeight </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">5</span><span class="s2">;</span>
             <span class="s1">slotCol </span><span class="s2">= </span><span class="s1">playerSlotCol</span><span class="s2">;</span>
             <span class="s1">slotRow </span><span class="s2">= </span><span class="s1">playerSlotRow</span><span class="s2">;</span>
         <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
             <span class="s1">frameX </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
             <span class="s1">frameY </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">frameWidth </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
             <span class="s1">frameHeight </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">5</span><span class="s2">;</span>
             <span class="s1">slotCol </span><span class="s2">= </span><span class="s1">npcSlotCol</span><span class="s2">;</span>
             <span class="s1">slotRow </span><span class="s2">= </span><span class="s1">npcSlotRow</span><span class="s2">;</span>
         <span class="s2">}</span>

        <span class="s4">// FRAME</span>
        <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">, </span><span class="s1">frameWidth</span><span class="s2">, </span><span class="s1">frameHeight</span><span class="s2">);</span>

        <span class="s4">// SLOT</span>
        <span class="s0">final int </span><span class="s1">slotXStart </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s3">20</span><span class="s2">;</span>
        <span class="s0">final int </span><span class="s1">slotYStart </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s3">20</span><span class="s2">;</span>
        <span class="s0">int </span><span class="s1">slotX </span><span class="s2">= </span><span class="s1">slotXStart</span><span class="s2">;</span>
        <span class="s0">int </span><span class="s1">slotY </span><span class="s2">= </span><span class="s1">slotYStart</span><span class="s2">;</span>
        <span class="s0">int </span><span class="s1">slotSize </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">+ </span><span class="s3">3</span><span class="s2">;</span>

         <span class="s4">// DRAW ITEMS</span>
         <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s3">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">size</span><span class="s2">(); </span><span class="s1">i</span><span class="s2">++) {</span>
             <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">i</span><span class="s2">;</span>
             <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
             <span class="s0">while </span><span class="s2">(</span><span class="s1">x </span><span class="s2">&gt;= </span><span class="s3">5</span><span class="s2">) {</span>
                 <span class="s1">x </span><span class="s2">-= </span><span class="s3">4</span><span class="s2">;</span>
                 <span class="s1">y</span><span class="s2">++;</span>
             <span class="s2">}</span>

             <span class="s0">if </span><span class="s2">(</span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) == </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">currentWeapon </span><span class="s2">|| </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) == </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">currentShield </span><span class="s2">|| </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) == </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">currentLight</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">240</span><span class="s2">, </span><span class="s3">190</span><span class="s2">, </span><span class="s3">90</span><span class="s2">));</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s1">slotX</span><span class="s2">, </span><span class="s1">slotY</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>
             <span class="s2">}</span>

             <span class="s0">if </span><span class="s2">(</span><span class="s1">x </span><span class="s2">== </span><span class="s1">playerSlotCol </span><span class="s2">&amp;&amp; </span><span class="s1">y </span><span class="s2">== </span><span class="s1">playerSlotRow </span><span class="s2">&amp;&amp; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">selectedX </span><span class="s2">!= -</span><span class="s3">1 </span><span class="s2">&amp;&amp; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">selectedY </span><span class="s2">!= -</span><span class="s3">1</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">).</span><span class="s1">down1</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">selectedX</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">selectedY</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
             <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">).</span><span class="s1">down1</span><span class="s2">, </span><span class="s1">slotX</span><span class="s2">, </span><span class="s1">slotY</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>
             <span class="s2">}</span>

             <span class="s4">// DISPLAY AMOUNT</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">entity </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player </span><span class="s2">&amp;&amp; </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">).</span><span class="s1">amount </span><span class="s2">&gt; </span><span class="s3">1</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s3">32f</span><span class="s2">));</span>
                 <span class="s0">int </span><span class="s1">amountX</span><span class="s2">, </span><span class="s1">amountY</span><span class="s2">;</span>

                 <span class="s1">String s </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">).</span><span class="s1">amount</span><span class="s2">);</span>
                 <span class="s1">amountX </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">s</span><span class="s2">, </span><span class="s1">slotX </span><span class="s2">+ </span><span class="s3">44</span><span class="s2">);</span>
                 <span class="s1">amountY </span><span class="s2">= </span><span class="s1">slotY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>

                 <span class="s4">// SHADOW</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">60</span><span class="s2">, </span><span class="s3">60</span><span class="s2">, </span><span class="s3">60</span><span class="s2">));</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">s</span><span class="s2">, </span><span class="s1">amountX</span><span class="s2">, </span><span class="s1">amountY</span><span class="s2">);</span>

                 <span class="s4">// NUMBER</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">s</span><span class="s2">, </span><span class="s1">amountX </span><span class="s2">- </span><span class="s3">3</span><span class="s2">, </span><span class="s1">amountY </span><span class="s2">- </span><span class="s3">3</span><span class="s2">);</span>
             <span class="s2">}</span>
             <span class="s1">slotX </span><span class="s2">+= </span><span class="s1">slotSize</span><span class="s2">;</span>

             <span class="s0">if </span><span class="s2">(</span><span class="s1">i </span><span class="s2">== </span><span class="s3">4 </span><span class="s2">|| </span><span class="s1">i </span><span class="s2">== </span><span class="s3">9 </span><span class="s2">|| </span><span class="s1">i </span><span class="s2">== </span><span class="s3">14</span><span class="s2">) {</span>
                 <span class="s1">slotX </span><span class="s2">= </span><span class="s1">slotXStart</span><span class="s2">;</span>
                 <span class="s1">slotY </span><span class="s2">+= </span><span class="s1">slotSize</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

        <span class="s4">// CURSOR</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">cursor</span><span class="s2">) {</span>
             <span class="s0">int </span><span class="s1">cursorX </span><span class="s2">= </span><span class="s1">slotXStart </span><span class="s2">+ (</span><span class="s1">slotSize </span><span class="s2">* </span><span class="s1">slotCol</span><span class="s2">);</span>
             <span class="s0">int </span><span class="s1">cursorY </span><span class="s2">= </span><span class="s1">slotYStart </span><span class="s2">+ (</span><span class="s1">slotSize </span><span class="s2">* </span><span class="s1">slotRow</span><span class="s2">);</span>
             <span class="s0">int </span><span class="s1">cursorWidth </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s0">int </span><span class="s1">cursorHeight </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>


             <span class="s4">// DRAW CURSOR</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setStroke</span><span class="s2">(</span><span class="s0">new </span><span class="s1">BasicStroke</span><span class="s2">(</span><span class="s3">3</span><span class="s2">));</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRoundRect</span><span class="s2">(</span><span class="s1">cursorX</span><span class="s2">, </span><span class="s1">cursorY</span><span class="s2">, </span><span class="s1">cursorWidth</span><span class="s2">, </span><span class="s1">cursorHeight</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>

             <span class="s4">// DESCRIPTION FRAME</span>
             <span class="s0">int </span><span class="s1">dFrameY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">frameHeight</span><span class="s2">;</span>
             <span class="s0">int </span><span class="s1">dFrameHeight </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>

             <span class="s4">// DRAW DESCRIPTION TEXT</span>
             <span class="s0">int </span><span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s3">20</span><span class="s2">;</span>
             <span class="s0">int </span><span class="s1">textY </span><span class="s2">= </span><span class="s1">dFrameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s3">28F</span><span class="s2">));</span>

             <span class="s0">int </span><span class="s1">itemIndex </span><span class="s2">= </span><span class="s1">getItemIndexOnSlot</span><span class="s2">(</span><span class="s1">slotCol</span><span class="s2">, </span><span class="s1">slotRow</span><span class="s2">);</span>
             <span class="s0">if </span><span class="s2">(</span><span class="s1">itemIndex </span><span class="s2">&lt; </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">size</span><span class="s2">()) {</span>
                 <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">dFrameY</span><span class="s2">, </span><span class="s1">frameWidth</span><span class="s2">, </span><span class="s1">dFrameHeight</span><span class="s2">);</span>
                 <span class="s0">for </span><span class="s2">(</span><span class="s1">String str </span><span class="s2">: </span><span class="s1">entity</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">).</span><span class="s1">description</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s5">&quot;</span><span class="s0">\n</span><span class="s5">&quot;</span><span class="s2">)) {</span>
                     <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
                     <span class="s1">textY </span><span class="s2">+= </span><span class="s3">32</span><span class="s2">;</span>
                 <span class="s2">}</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public int </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">String text</span><span class="s2">) {</span>
         <span class="s0">int </span><span class="s1">length </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) </span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFontMetrics</span><span class="s2">().</span><span class="s1">getStringBounds</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">g2</span><span class="s2">).</span><span class="s1">getWidth</span><span class="s2">();</span>
         <span class="s0">return </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenWidth </span><span class="s2">/ </span><span class="s3">2 </span><span class="s2">- </span><span class="s1">length </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>
     <span class="s2">}</span>

    <span class="s0">public int </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">String text</span><span class="s2">, </span><span class="s0">int </span><span class="s1">tailX</span><span class="s2">) {</span>
        <span class="s0">int </span><span class="s1">length </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) </span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFontMetrics</span><span class="s2">().</span><span class="s1">getStringBounds</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">g2</span><span class="s2">).</span><span class="s1">getWidth</span><span class="s2">();</span>
        <span class="s0">return </span><span class="s1">tailX </span><span class="s2">- </span><span class="s1">length</span><span class="s2">;</span>
    <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawDialogueScreen</span><span class="s2">() {</span>
         <span class="s4">// WINDOW</span>
         <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">width </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenWidth </span><span class="s2">- (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">);</span>
         <span class="s0">int </span><span class="s1">height </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">4</span><span class="s2">;</span>

         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>

         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">PLAIN</span><span class="s2">, </span><span class="s3">32</span><span class="s2">));</span>
         <span class="s1">x </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>

         <span class="s0">if</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogues</span><span class="s2">[</span><span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogueSet</span><span class="s2">][</span><span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogueIndex</span><span class="s2">] != </span><span class="s0">null</span><span class="s2">) {</span>
            <span class="s0">char</span><span class="s2">[] </span><span class="s1">characters </span><span class="s2">= </span><span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogues</span><span class="s2">[</span><span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogueSet</span><span class="s2">][</span><span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogueIndex</span><span class="s2">].</span><span class="s1">toCharArray</span><span class="s2">();</span>
            <span class="s0">if</span><span class="s2">(</span><span class="s1">charIndex </span><span class="s2">&lt; </span><span class="s1">characters</span><span class="s2">.</span><span class="s1">length</span><span class="s2">) {</span>
                <span class="s1">gp</span><span class="s2">.</span><span class="s1">playSE</span><span class="s2">(</span><span class="s3">18</span><span class="s2">);</span>
                <span class="s1">String s </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">characters</span><span class="s2">[</span><span class="s1">charIndex</span><span class="s2">]);</span>
                <span class="s1">combinedText </span><span class="s2">+= </span><span class="s1">s</span><span class="s2">;</span>
                <span class="s1">currentDialogue </span><span class="s2">= </span><span class="s1">combinedText</span><span class="s2">;</span>
                <span class="s1">charIndex</span><span class="s2">++;</span>
            <span class="s2">}</span>
            <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                <span class="s1">charIndex </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                <span class="s1">combinedText </span><span class="s2">= </span><span class="s5">&quot;&quot;</span><span class="s2">;</span>
                <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">dialogueState</span><span class="s2">) {</span>
                    <span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogueIndex</span><span class="s2">++;</span>
                    <span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span>
                <span class="s2">}</span>
            <span class="s2">}</span>
         <span class="s2">} </span><span class="s0">else </span><span class="s2">{ </span><span class="s4">// If no text in the array</span>
            <span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogueIndex </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
            <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">== </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">dialogueState</span><span class="s2">) {</span>
                <span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">playState</span><span class="s2">;</span>
            <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s0">for</span><span class="s2">(</span><span class="s1">String line </span><span class="s2">: </span><span class="s1">currentDialogue</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s5">&quot;</span><span class="s0">\n</span><span class="s5">&quot;</span><span class="s2">)) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">line</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s3">40</span><span class="s2">;</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawOptionScreen</span><span class="s2">() {</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">white</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s3">32F</span><span class="s2">));</span>

         <span class="s4">// SUB WINDOW</span>
         <span class="s0">int </span><span class="s1">frameX </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">frameY </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">frameWidth </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">8</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">frameHeight </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">10</span><span class="s2">;</span>
         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">, </span><span class="s1">frameWidth</span><span class="s2">, </span><span class="s1">frameHeight</span><span class="s2">);</span>

         <span class="s0">switch</span><span class="s2">(</span><span class="s1">subState</span><span class="s2">) {</span>
             <span class="s0">case </span><span class="s3">0</span><span class="s2">:</span>
                 <span class="s1">optionTop</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">);</span>
                 <span class="s0">break</span><span class="s2">;</span>
             <span class="s0">case </span><span class="s3">1</span><span class="s2">:</span>
                 <span class="s1">fullScreenNotification</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">);</span>
                 <span class="s0">break</span><span class="s2">;</span>
             <span class="s0">case </span><span class="s3">2</span><span class="s2">:</span>
                 <span class="s1">optionControl</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">);</span>
                 <span class="s0">break</span><span class="s2">;</span>
             <span class="s0">case </span><span class="s3">3</span><span class="s2">:</span>
                 <span class="s1">endGameConfirmation</span><span class="s2">(</span><span class="s1">frameX</span><span class="s2">, </span><span class="s1">frameY</span><span class="s2">);</span>
                 <span class="s0">break</span><span class="s2">;</span>
         <span class="s2">}</span>

         <span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">optionTop</span><span class="s2">(</span><span class="s0">int </span><span class="s1">frameX</span><span class="s2">, </span><span class="s0">int </span><span class="s1">frameY</span><span class="s2">) {</span>
         <span class="s0">int </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">;</span>

         <span class="s4">// TITLE</span>
         <span class="s1">String text </span><span class="s2">= </span><span class="s5">&quot;Options&quot;</span><span class="s2">;</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>

         <span class="s4">// FULL SCREEN ON/OFF</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Full Screen&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">fullScreenOn </span><span class="s2">= !</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">fullScreenOn</span><span class="s2">;</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">1</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s4">// MUSIC</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Music&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">1</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s2">}</span>

         <span class="s4">// SE</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Sound Effects&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">2</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s2">}</span>

         <span class="s4">// CONTROL</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Control&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">3</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">2</span><span class="s2">;</span>
                 <span class="s1">commandNum </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s4">// END GAME</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;End Game&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">4</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">3</span><span class="s2">;</span>
                 <span class="s1">commandNum </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s4">// BACK</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Back&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">5</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">playState</span><span class="s2">;</span>
                 <span class="s1">commandNum </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s4">// FULL SCREEN CHECKBOX</span>
         <span class="s1">textX </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">4.5</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2 </span><span class="s2">+ </span><span class="s3">24</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setStroke</span><span class="s2">(</span><span class="s0">new </span><span class="s1">BasicStroke</span><span class="s2">(</span><span class="s3">3</span><span class="s2">));</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRoundRect</span><span class="s2">(</span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">fullScreenOn</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>
         <span class="s2">}</span>

         <span class="s4">// MUSIC VOLUME</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRoundRect</span><span class="s2">(</span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">, </span><span class="s3">120</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>
         <span class="s0">int </span><span class="s1">volumeWidth </span><span class="s2">= </span><span class="s3">24 </span><span class="s2">* </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">music</span><span class="s2">.</span><span class="s1">volumeScale</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">, </span><span class="s1">volumeWidth</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>

         <span class="s4">// SE</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRoundRect</span><span class="s2">(</span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">, </span><span class="s3">120</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>
         <span class="s1">volumeWidth </span><span class="s2">= </span><span class="s3">24 </span><span class="s2">* </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">se</span><span class="s2">.</span><span class="s1">volumeScale</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">, </span><span class="s1">volumeWidth</span><span class="s2">, </span><span class="s3">24</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>

         <span class="s1">gp</span><span class="s2">.</span><span class="s1">config</span><span class="s2">.</span><span class="s1">saveConfig</span><span class="s2">();</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">fullScreenNotification</span><span class="s2">(</span><span class="s0">int </span><span class="s1">frameX</span><span class="s2">, </span><span class="s0">int </span><span class="s1">frameY</span><span class="s2">) {</span>
         <span class="s0">int </span><span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>

         <span class="s1">currentDialogue </span><span class="s2">= </span><span class="s5">&quot;The change will take </span><span class="s0">\n</span><span class="s5">effect after restarting </span><span class="s0">\n</span><span class="s5">the game.&quot;</span><span class="s2">;</span>

         <span class="s0">for</span><span class="s2">(</span><span class="s1">String str </span><span class="s2">: </span><span class="s1">currentDialogue</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s5">&quot;</span><span class="s0">\n</span><span class="s5">&quot;</span><span class="s2">)) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s1">textY </span><span class="s2">+= </span><span class="s3">40</span><span class="s2">;</span>
         <span class="s2">}</span>

         <span class="s4">// BACK</span>
         <span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">9</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Back&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">optionControl</span><span class="s2">(</span><span class="s0">int </span><span class="s1">frameX</span><span class="s2">, </span><span class="s0">int </span><span class="s1">frameY</span><span class="s2">) {</span>
         <span class="s0">int </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">;</span>

         <span class="s4">// TITLE</span>
         <span class="s1">String text </span><span class="s2">= </span><span class="s5">&quot;Control&quot;</span><span class="s2">;</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>

         <span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Move&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Confirm/Attack&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Shoot/Cast&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Character Screen&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Pause&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Options&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>

         <span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
         <span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;WASD&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;ENTER&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;F&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;E&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;P&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;ESC&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>

         <span class="s4">// BACK</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">9</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Back&quot;</span><span class="s2">, </span><span class="s1">textX</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">textX </span><span class="s2">- </span><span class="s3">25</span><span class="s2">, </span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">commandNum </span><span class="s2">= </span><span class="s3">3</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">endGameConfirmation</span><span class="s2">(</span><span class="s0">int </span><span class="s1">frameX</span><span class="s2">, </span><span class="s0">int </span><span class="s1">frameY</span><span class="s2">) {</span>
         <span class="s0">int </span><span class="s1">textX </span><span class="s2">= </span><span class="s1">frameX </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">textY </span><span class="s2">= </span><span class="s1">frameY </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>

         <span class="s1">currentDialogue </span><span class="s2">= </span><span class="s5">&quot;Quit the game and </span><span class="s0">\n</span><span class="s5">return to the title screen?&quot;</span><span class="s2">;</span>
         <span class="s0">for</span><span class="s2">(</span><span class="s1">String line</span><span class="s2">: </span><span class="s1">currentDialogue</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s5">&quot;</span><span class="s0">\n</span><span class="s5">&quot;</span><span class="s2">))</span>
         <span class="s2">{</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">line</span><span class="s2">,</span><span class="s1">textX</span><span class="s2">,</span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s1">textY </span><span class="s2">+= </span><span class="s3">40</span><span class="s2">;</span>
         <span class="s2">}</span>
         <span class="s4">//YES</span>
         <span class="s1">String text </span><span class="s2">= </span><span class="s5">&quot;Yes&quot;</span><span class="s2">;</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">,</span><span class="s1">textX</span><span class="s2">,</span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">)</span>
         <span class="s2">{</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">,</span><span class="s1">textX</span><span class="s2">-</span><span class="s3">25</span><span class="s2">,</span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">)</span>
             <span class="s2">{</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">.</span><span class="s1">titleScreenState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">titleState</span><span class="s2">;</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">resetGame</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span>
                 <span class="s1">gp</span><span class="s2">.</span><span class="s1">stopMusic</span><span class="s2">();</span>
             <span class="s2">}</span>
         <span class="s2">}</span>

         <span class="s4">//NO</span>
         <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;No&quot;</span><span class="s2">;</span>
         <span class="s1">textX </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
         <span class="s1">textY </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">,</span><span class="s1">textX</span><span class="s2">,</span><span class="s1">textY</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">1</span><span class="s2">)</span>
         <span class="s2">{</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">,</span><span class="s1">textX</span><span class="s2">-</span><span class="s3">25</span><span class="s2">,</span><span class="s1">textY</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">)</span>
             <span class="s2">{</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">commandNum </span><span class="s2">= </span><span class="s3">4</span><span class="s2">; </span><span class="s4">//back to end row</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s0">int </span><span class="s1">x</span><span class="s2">, </span><span class="s0">int </span><span class="s1">y</span><span class="s2">, </span><span class="s0">int </span><span class="s1">width</span><span class="s2">, </span><span class="s0">int </span><span class="s1">height</span><span class="s2">) {</span>
         <span class="s1">Color c </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">210</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">c</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">, </span><span class="s3">35</span><span class="s2">, </span><span class="s3">35</span><span class="s2">);</span>

         <span class="s1">c </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">255</span><span class="s2">, </span><span class="s3">255</span><span class="s2">, </span><span class="s3">255</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">c</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setStroke</span><span class="s2">(</span><span class="s0">new </span><span class="s1">BasicStroke</span><span class="s2">(</span><span class="s3">5</span><span class="s2">));</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawRoundRect</span><span class="s2">(</span><span class="s1">x </span><span class="s2">+ </span><span class="s3">5</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">5</span><span class="s2">, </span><span class="s1">width </span><span class="s2">- </span><span class="s3">10</span><span class="s2">, </span><span class="s1">height </span><span class="s2">- </span><span class="s3">10</span><span class="s2">, </span><span class="s3">25</span><span class="s2">, </span><span class="s3">25</span><span class="s2">);</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawTitleScreen</span><span class="s2">() {</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">));</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRect</span><span class="s2">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenWidth</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenHeight</span><span class="s2">);</span>

         <span class="s0">if</span><span class="s2">(</span><span class="s1">titleScreenState </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>

             <span class="s4">// TITLE NAME</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s3">96</span><span class="s2">));</span>
             <span class="s1">String text </span><span class="s2">= </span><span class="s5">&quot;Blue Boy Adventure&quot;</span><span class="s2">;</span>
             <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>

             <span class="s4">// SHADOW</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">GRAY</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">5</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">5</span><span class="s2">);</span>

             <span class="s4">// MAIN COLOR</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">WHITE</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>

             <span class="s4">// BLUE BOY IMAGE</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenWidth </span><span class="s2">/ </span><span class="s3">2 </span><span class="s2">- (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">) / </span><span class="s3">2</span><span class="s2">;</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">down1</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>

             <span class="s4">// MENU</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s3">48</span><span class="s2">));</span>

             <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;NEW GAME&quot;</span><span class="s2">;</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3.5</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s0">if </span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s2">}</span>

             <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;LOAD GAME&quot;</span><span class="s2">;</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s0">if </span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">1</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s2">}</span>

             <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;QUIT&quot;</span><span class="s2">;</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s0">if </span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">2</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s2">}</span>
         <span class="s2">} </span><span class="s0">else if</span><span class="s2">(</span><span class="s1">titleScreenState </span><span class="s2">== </span><span class="s3">1</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">WHITE</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">g2</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">().</span><span class="s1">deriveFont</span><span class="s2">(</span><span class="s3">42F</span><span class="s2">));</span>

             <span class="s1">String text </span><span class="s2">= </span><span class="s5">&quot;Select your class!&quot;</span><span class="s2">;</span>
             <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>

             <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;Fighter&quot;</span><span class="s2">;</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>

             <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s2">}</span>

             <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;Thief&quot;</span><span class="s2">;</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>

             <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">1</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s2">}</span>

             <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;Sorcerer&quot;</span><span class="s2">;</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>

             <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">2</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s2">}</span>

             <span class="s1">text </span><span class="s2">= </span><span class="s5">&quot;Back&quot;</span><span class="s2">;</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForCenteredText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>

             <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">3</span><span class="s2">) {</span>
                 <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public int </span><span class="s1">getItemIndexOnSlot</span><span class="s2">(</span><span class="s0">int </span><span class="s1">slotCol</span><span class="s2">, </span><span class="s0">int </span><span class="s1">slotRow</span><span class="s2">) {</span>
        <span class="s0">return </span><span class="s1">slotCol </span><span class="s2">+ (</span><span class="s1">slotRow </span><span class="s2">* </span><span class="s3">5</span><span class="s2">);</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawTransition</span><span class="s2">() {</span>
         <span class="s1">counter</span><span class="s2">++;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Color</span><span class="s2">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s1">counter </span><span class="s2">* </span><span class="s3">5</span><span class="s2">));</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenWidth</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">screenHeight</span><span class="s2">, </span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">counter </span><span class="s2">== </span><span class="s3">50</span><span class="s2">) {</span>
             <span class="s1">counter </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">gameState </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">playState</span><span class="s2">;</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">currentMap </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">eventHandler</span><span class="s2">.</span><span class="s1">tempMap</span><span class="s2">;</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">worldX </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">eventHandler</span><span class="s2">.</span><span class="s1">tempCol</span><span class="s2">;</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">worldY </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">eventHandler</span><span class="s2">.</span><span class="s1">tempRow</span><span class="s2">;</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">eventHandler</span><span class="s2">.</span><span class="s1">previousEventX </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">worldX</span><span class="s2">;</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">eventHandler</span><span class="s2">.</span><span class="s1">previousEventY </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">worldY</span><span class="s2">;</span>
             <span class="s1">gp</span><span class="s2">.</span><span class="s1">changeArea</span><span class="s2">();</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">drawTradeScreen</span><span class="s2">() {</span>
         <span class="s0">switch</span><span class="s2">(</span><span class="s1">subState</span><span class="s2">) {</span>
             <span class="s0">case </span><span class="s3">0</span><span class="s2">:</span>
                 <span class="s1">tradeSelect</span><span class="s2">();</span>
                 <span class="s0">break</span><span class="s2">;</span>
             <span class="s0">case </span><span class="s3">1</span><span class="s2">:</span>
                 <span class="s1">tradeBuy</span><span class="s2">();</span>
                 <span class="s0">break</span><span class="s2">;</span>
             <span class="s0">case </span><span class="s3">2</span><span class="s2">:</span>
                 <span class="s1">tradeSell</span><span class="s2">();</span>
                 <span class="s0">break</span><span class="s2">;</span>
         <span class="s2">}</span>
         <span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">tradeSelect</span><span class="s2">() {</span>
         <span class="s1">npc</span><span class="s2">.</span><span class="s1">dialogueSet </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
         <span class="s1">drawDialogueScreen</span><span class="s2">();</span>

         <span class="s4">// DRAW WINDOW</span>
         <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">15</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">4</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">width </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">height </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">3.5</span><span class="s2">);</span>
         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>

         <span class="s4">// DRAW TEXTS</span>
         <span class="s1">x </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Buy&quot;</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">0</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s3">24</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">1</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
         <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Sell&quot;</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">1</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s3">24</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">subState </span><span class="s2">= </span><span class="s3">2</span><span class="s2">;</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
         <span class="s1">y </span><span class="s2">+= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Leave&quot;</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">commandNum </span><span class="s2">== </span><span class="s3">2</span><span class="s2">) {</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;&gt;&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">- </span><span class="s3">24</span><span class="s2">, </span><span class="s1">y</span><span class="s2">);</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s1">commandNum </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                 <span class="s1">npc</span><span class="s2">.</span><span class="s1">startDialogue</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">, </span><span class="s3">1</span><span class="s2">);</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">tradeBuy</span><span class="s2">() {</span>
         <span class="s4">// DRAW PLAYER INVENTORY</span>
         <span class="s1">drawInventory</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">, </span><span class="s0">false</span><span class="s2">);</span>

         <span class="s4">// DRAW NPC INVENTORY</span>
         <span class="s1">drawInventory</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">, </span><span class="s0">true</span><span class="s2">);</span>

         <span class="s4">// DRAW HINT WINDOW</span>
         <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">9</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">width </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">height </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;[ESC] Back&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">24</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">60</span><span class="s2">);</span>

         <span class="s4">// DRAW PLAYER COIN WINDOW</span>
         <span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">12</span><span class="s2">;</span>
         <span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">9</span><span class="s2">;</span>
         <span class="s1">width </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
         <span class="s1">height </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Your Coin: &quot; </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">coin</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">24</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">60</span><span class="s2">);</span>

         <span class="s4">// DRAW PRICE WINDOW</span>
         <span class="s0">int </span><span class="s1">itemIndex </span><span class="s2">= </span><span class="s1">getItemIndexOnSlot</span><span class="s2">(</span><span class="s1">npcSlotCol</span><span class="s2">, </span><span class="s1">npcSlotRow</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">itemIndex </span><span class="s2">&lt; </span><span class="s1">npc</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">size</span><span class="s2">()) {</span>
             <span class="s1">x </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">5.5</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">5.5</span><span class="s2">);</span>
             <span class="s1">width </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2.5</span><span class="s2">);</span>
             <span class="s1">height </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">coin</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">10</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">7</span><span class="s2">, </span><span class="s3">32</span><span class="s2">, </span><span class="s3">32</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>

             <span class="s0">int </span><span class="s1">price </span><span class="s2">= </span><span class="s1">npc</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">).</span><span class="s1">price</span><span class="s2">;</span>
             <span class="s1">String text </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">price</span><span class="s2">);</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">8 </span><span class="s2">- </span><span class="s3">20</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">32</span><span class="s2">);</span>

             <span class="s4">// BUY AN ITEM</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s0">if</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">).</span><span class="s1">price </span><span class="s2">&gt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">coin</span><span class="s2">) {</span>
                     <span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                     <span class="s1">npc</span><span class="s2">.</span><span class="s1">startDialogue</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">, </span><span class="s3">2</span><span class="s2">);</span>
                 <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                     <span class="s0">if </span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">canObtainItem</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">))) {</span>
                         <span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">coin </span><span class="s2">-= </span><span class="s1">npc</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">).</span><span class="s1">price</span><span class="s2">;</span>
                     <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                         <span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                         <span class="s1">npc</span><span class="s2">.</span><span class="s1">startDialogue</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">, </span><span class="s3">3</span><span class="s2">);</span>
                     <span class="s2">}</span>
                 <span class="s2">}</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>

     <span class="s0">public void </span><span class="s1">tradeSell</span><span class="s2">() {</span>
         <span class="s4">// DRAW PLAYER INVENTORY</span>
         <span class="s1">drawInventory</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">, </span><span class="s0">true</span><span class="s2">);</span>

         <span class="s4">// DRAW HINT WINDOW</span>
         <span class="s0">int </span><span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">9</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">width </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
         <span class="s0">int </span><span class="s1">height </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;[ESC] Back&quot;</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">24</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">60</span><span class="s2">);</span>

         <span class="s4">// DRAW PLAYER COIN WINDOW</span>
         <span class="s1">x </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">12</span><span class="s2">;</span>
         <span class="s1">y </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">9</span><span class="s2">;</span>
         <span class="s1">width </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">6</span><span class="s2">;</span>
         <span class="s1">height </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2</span><span class="s2">;</span>
         <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>
         <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s5">&quot;Your Coin: &quot; </span><span class="s2">+ </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">coin</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">24</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">60</span><span class="s2">);</span>

         <span class="s4">// DRAW PRICE WINDOW</span>
         <span class="s0">int </span><span class="s1">itemIndex </span><span class="s2">= </span><span class="s1">getItemIndexOnSlot</span><span class="s2">(</span><span class="s1">playerSlotCol</span><span class="s2">, </span><span class="s1">playerSlotRow</span><span class="s2">);</span>
         <span class="s0">if</span><span class="s2">(</span><span class="s1">itemIndex </span><span class="s2">&lt; </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">size</span><span class="s2">()) {</span>
             <span class="s1">x </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">15.5</span><span class="s2">);</span>
             <span class="s1">y </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">5.5</span><span class="s2">);</span>
             <span class="s1">width </span><span class="s2">= (</span><span class="s0">int</span><span class="s2">) (</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">2.5</span><span class="s2">);</span>
             <span class="s1">height </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize</span><span class="s2">;</span>
             <span class="s1">drawSubWindow</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">height</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawImage</span><span class="s2">(</span><span class="s1">coin</span><span class="s2">, </span><span class="s1">x </span><span class="s2">+ </span><span class="s3">10</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">7</span><span class="s2">, </span><span class="s3">32</span><span class="s2">, </span><span class="s3">32</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span>

             <span class="s0">int </span><span class="s1">price </span><span class="s2">= </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">).</span><span class="s1">price </span><span class="s2">/ </span><span class="s3">2</span><span class="s2">;</span>
             <span class="s1">String text </span><span class="s2">= </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">price</span><span class="s2">);</span>
             <span class="s1">x </span><span class="s2">= </span><span class="s1">getXForAlignToRightText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">tileSize </span><span class="s2">* </span><span class="s3">18 </span><span class="s2">- </span><span class="s3">20</span><span class="s2">);</span>
             <span class="s1">g2</span><span class="s2">.</span><span class="s1">drawString</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ </span><span class="s3">32</span><span class="s2">);</span>

             <span class="s4">// SELL AN ITEM</span>
             <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">keyH</span><span class="s2">.</span><span class="s1">enterPressed</span><span class="s2">) {</span>
                 <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">) == </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">currentWeapon </span><span class="s2">|| </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">) == </span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">currentShield</span><span class="s2">) {</span>
                     <span class="s1">commandNum </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                     <span class="s1">subState </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span>
                     <span class="s1">npc</span><span class="s2">.</span><span class="s1">startDialogue</span><span class="s2">(</span><span class="s1">npc</span><span class="s2">, </span><span class="s3">4</span><span class="s2">);</span>
                 <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                     <span class="s0">if</span><span class="s2">(</span><span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">).</span><span class="s1">amount </span><span class="s2">&gt; </span><span class="s3">1</span><span class="s2">) {</span>
                         <span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">).</span><span class="s1">amount</span><span class="s2">--;</span>
                     <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                         <span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">inventory</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s1">itemIndex</span><span class="s2">);</span>
                     <span class="s2">}</span>
                     <span class="s1">gp</span><span class="s2">.</span><span class="s1">player</span><span class="s2">.</span><span class="s1">coin </span><span class="s2">+= </span><span class="s1">price</span><span class="s2">;</span>
                 <span class="s2">}</span>
             <span class="s2">}</span>
         <span class="s2">}</span>
     <span class="s2">}</span>
<span class="s2">}</span>
</pre>
</body>
</html>